Query(
  Lambda(
    ["targetTime"],
    Let(
      {
        all_coll: Paginate(Collections()),
        eventList: Map(
          Var("all_coll"),
          Lambda(
            "c",
            Call("get_events_from_collection", [Var("targetTime"), Var("c")])
          )
        )
      },
      Filter(Var("eventList"), Lambda("el", IsNonEmpty(Var("el"))))
    )
  )
)
